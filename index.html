<script>
const PROXY_BASE = 'https://brw-sigma.vercel.app/proxy?url=';

function fixURL(url){
  url = url.trim();
  if(!/^https?:\/\//i.test(url)) return 'https://' + url;
  return url;
}

function navigate(){
  const raw = document.getElementById('urlInput').value.trim();
  if(!raw) return;

  if(/\s/.test(raw) || !raw.includes('.')){
    const q = encodeURIComponent(raw);
    const searchUrl = 'https://www.bing.com/search?q=' + q;
    document.getElementById('contentFrame').src = PROXY_BASE + encodeURIComponent(searchUrl);
  } else {
    let url = fixURL(raw);
    document.getElementById('contentFrame').src = PROXY_BASE + encodeURIComponent(url);
  }
}

function openTest(v){
  document.getElementById('urlInput').value = v;
  navigate();
}

document.getElementById('urlInput').addEventListener('keypress', function(e){
  if(e.key === 'Enter'){
    navigate();
  }
});
</script>
